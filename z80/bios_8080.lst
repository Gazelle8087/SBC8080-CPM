 AS V1.42 Beta [Bld 271] - Source File bios_8080.asm - Page 1 - 7/27/2024 16:26:39


       1/   0 :                         ;	CBIOS for CP/M 2.2 running on emuz80-57q + SBC8080
       2/   0 :                         ;
       3/   0 :                         ;	Copyright (C) 2024 by Gazelle
       4/   0 :                         ;
       5/   0 :                         ;Permission is hereby granted, free of charge, to any person
       6/   0 :                         ;obtaining a copy of this software and associated documentation
       7/   0 :                         ;files (the "Software"), to deal in the Software without
       8/   0 :                         ;restriction, including without limitation the rights to use,
       9/   0 :                         ;copy, modify, merge, publish, distribute, sublicense, and/or sell
      10/   0 :                         ;copies of the Software, and to permit persons to whom the
      11/   0 :                         ;Software is furnished to do so, subject to the following
      12/   0 :                         ;conditions:
      13/   0 :                         ;
      14/   0 :                         ;The above copyright notice and this permission notice shall be
      15/   0 :                         ;included in all copies or substantial portions of the Software.
      16/   0 :                         ;
      17/   0 :                         ;THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
      18/   0 :                         ;EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
      19/   0 :                         ;OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
      20/   0 :                         ;NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
      21/   0 :                         ;HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
      22/   0 :                         ;WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
      23/   0 :                         ;FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
      24/   0 :                         ;OTHER DEALINGS IN THE SOFTWARE.
      25/   0 :                         
      26/   0 :                         ;
      27/   0 :                         ;	Z80 CBIOS for Z80-Simulator
      28/   0 :                         ;
      29/   0 :                         ;	Copyright (C) 1988-2007 by Udo Munk
      30/   0 :                         ;
      31/   0 :                         	CPU z80			;written in Zilog mnemonic,
      32/   0 :                         				;however only use 8080 instruction
      33/   0 :                         	include	"ipl_bios_inc.asm"
(1)    1/   0 : =40H                    PIC_IOBASE	EQU	40h
(1)    2/   0 : =0H                     UART_D8251	EQU	0
(1)    3/   0 : =1H                     UART_C8251	EQU	1
(1)    4/   0 :                         ;
(1)    5/   0 :                         ;	SuperMEZ80 I/O ports (PIC)
(1)    6/   0 :                         
(1)    7/   0 : =0FB20H                 DRV_NO		EQU	0FB20H
(1)    8/   0 : =0FB21H                 TRK_NO		EQU	0FB21H
(1)    9/   0 : =0FB22H                 SEC_NO		EQU	0FB22H
(1)   10/   0 : =0FB23H                 DMA_L		EQU	0FB23H
(1)   11/   0 : =0FB24H                 DMA_H		EQU	0FB24H
(1)   12/   0 :                         
(1)   13/   0 : =46H                    GET_BDOSCCP	EQU	PIC_IOBASE+6	;load bdos+ccp from pic rom
(1)   14/   0 : =47H                    GET_BIOS	EQU	PIC_IOBASE+7	;load bios from pic rom
(1)   15/   0 :                         
(1)   16/   0 : =4EH                    FDCST		EQU	PIC_IOBASE+14	;fdc-port: status
(1)   17/   0 : =52H                    DISK_READ	EQU	PIC_IOBASE+18
(1)   18/   0 : =53H                    DISK_WRITE	EQU	PIC_IOBASE+19
(1)   19/   0 : =0H                     D_SUCCESS	EQU	0
(1)   20/   0 : =1H                     D_ERROR		EQU	1
(1)   21/   0 :                         
(1)   22/   0 : =0C0H                   IOBASE_180	EQU	0C0H
(1)   23/   0 :                         
(1)   24/   0 :                         
      34/   0 :                         
      35/   0 : =40H                    MSIZE	EQU	64		;cp/m version memory size in kilobytes
      36/   0 :                         ;
 AS V1.42 Beta [Bld 271] - Source File bios_8080.asm - Page 2 - 7/27/2024 16:26:39


      37/   0 :                         ;	"bias" is address offset from 3400H for memory systems
      38/   0 :                         ;	than 16K (referred to as "b" throughout the text).
      39/   0 :                         ;
      40/   0 : =0B000H                 BIAS	EQU	(MSIZE-20)*1024
      41/   0 : =0E400H                 CCP	EQU	3400H+BIAS	;base of ccp
      42/   0 : =0EC06H                 BDOS	EQU	CCP+806H	;base of bdos
      43/   0 : =0FA00H                 BIOS	EQU	CCP+1600H	;base of bios
      44/   0 : =2CH                    NSECTS	EQU	(BIOS-CCP)/128	;warm start sector count
      45/   0 : =4H                     CDISK	EQU	0004H		;current disk number 0=A,...,15=P
      46/   0 : =3H                     IOBYTE	EQU	0003H		;intel i/o byte
      47/   0 :                         ;
      48/FA00 :                         	ORG	BIOS		;origin of this program
      49/FA00 :                         ;
      50/FA00 :                         ;	jump vector for individual subroutines
      51/FA00 :                         ;
      52/FA00 : C3 3B FB                	JP	BOOT		;cold start
      53/FA03 : C3 4E FB                WBOOTE: JP	WBOOT		;warm start
      54/FA06 : C3 74 FB                	JP	CONST		;console status
      55/FA09 : C3 80 FB                	JP	CONIN		;console character in
      56/FA0C : C3 8A FB                	JP	CONOUT		;console character out
      57/FA0F : C3 97 FB                	JP	LIST		;list character out
      58/FA12 : C3 97 FB                	JP	PUNCH		;punch character out
      59/FA15 : C3 97 FB                	JP	READER		;reader character in
      60/FA18 : C3 98 FB                	JP	HOME		;move head to home position
      61/FA1B : C3 9D FB                	JP	SELDSK		;select disk
      62/FA1E : C3 CB FB                	JP	SETTRK		;set track number
      63/FA21 : C3 D0 FB                	JP	SETSEC		;set sector number
      64/FA24 : C3 E6 FB                	JP	SETDMA		;set dma address
      65/FA27 : C3 EF FB                	JP	READ		;read disk
      66/FA2A : C3 F5 FB                	JP	WRITE		;write disk
      67/FA2D : C3 95 FB                	JP	LISTST		;return list status
      68/FA30 : C3 D5 FB                	JP	SECTRAN		;sector translate
      69/FA33 :                         ;
      70/FA33 :                         ;	fixed data tables for four-drive standard
      71/FA33 :                         ;	IBM-compatible 8" SD disks
      72/FA33 :                         ;
      73/FA33 :                         ;	disk parameter header for disk 00
      74/FA33 : 73 FA 00 00             DPBASE:	DEFW	TRANS,0000H
      75/FA37 : 00 00 00 00             	DEFW	0000H,0000H
      76/FA3B : FA FB 8D FA             	DEFW	DIRBF,DPBLK
      77/FA3F : F4 FE 7A FC             	DEFW	CHK00,ALL00
      78/FA43 :                         ;	disk parameter header for disk 01
      79/FA43 : 73 FA 00 00             	DEFW	TRANS,0000H
      80/FA47 : 00 00 00 00             	DEFW	0000H,0000H
      81/FA4B : FA FB 8D FA             	DEFW	DIRBF,DPBLK
      82/FA4F : 04 FF 99 FC             	DEFW	CHK01,ALL01
      83/FA53 :                         ;	disk parameter header for disk 02
      84/FA53 : 73 FA 00 00             	DEFW	TRANS,0000H
      85/FA57 : 00 00 00 00             	DEFW	0000H,0000H
      86/FA5B : FA FB 8D FA             	DEFW	DIRBF,DPBLK
      87/FA5F : 14 FF B8 FC             	DEFW	CHK02,ALL02
      88/FA63 :                         ;	disk parameter header for disk 03
      89/FA63 : 73 FA 00 00             	DEFW	TRANS,0000H
      90/FA67 : 00 00 00 00             	DEFW	0000H,0000H
      91/FA6B : FA FB 8D FA             	DEFW	DIRBF,DPBLK
      92/FA6F : 24 FF D7 FC             	DEFW	CHK03,ALL03
      93/FA73 :                         ;
      94/FA73 :                         ;	sector translate vector for the IBM 8" SD disks
      95/FA73 :                         ;
      96/FA73 : 01 07 0D 13             TRANS:	DEFB	1,7,13,19	;sectors 1,2,3,4
 AS V1.42 Beta [Bld 271] - Source File bios_8080.asm - Page 3 - 7/27/2024 16:26:39


      97/FA77 : 19 05 0B 11             	DEFB	25,5,11,17	;sectors 5,6,7,8
      98/FA7B : 17 03 09 0F             	DEFB	23,3,9,15	;sectors 9,10,11,12
      99/FA7F : 15 02 08 0E             	DEFB	21,2,8,14	;sectors 13,14,15,16
     100/FA83 : 14 1A 06 0C             	DEFB	20,26,6,12	;sectors 17,18,19,20
     101/FA87 : 12 18 04 0A             	DEFB	18,24,4,10	;sectors 21,22,23,24
     102/FA8B : 10 16                   	DEFB	16,22		;sectors 25,26
     103/FA8D :                         ;
     104/FA8D :                         ;	disk parameter block, common to all IBM 8" SD disks
     105/FA8D :                         ;
     106/FA8D : 1A 00                   DPBLK:  DEFW	26		;sectors per track
     107/FA8F : 03                      	DEFB	3		;block shift factor
     108/FA90 : 07                      	DEFB	7		;block mask
     109/FA91 : 00                      	DEFB	0		;extent mask
     110/FA92 : F2 00                   	DEFW	242		;disk size-1
     111/FA94 : 3F 00                   	DEFW	63		;directory max
     112/FA96 : C0                      	DEFB	192		;alloc 0
     113/FA97 : 00                      	DEFB	0		;alloc 1
     114/FA98 : 10 00                   	DEFW	16		;check size
     115/FA9A : 02 00                   	DEFW	2		;track offset
     116/FA9C :                         ;
     117/FA9C :                         ;	fixed data tables for 4MB harddisks
     118/FA9C :                         ;
     119/FA9C :                         ;	disk parameter header
     120/FA9C : 00 00 00 00             HDB1:	DEFW	0000H,0000H
     121/FAA0 : 00 00 00 00             	DEFW	0000H,0000H
     122/FAA4 : FA FB BC FA             	DEFW	DIRBF,HDBLK
     123/FAA8 : 34 FF F6 FC             	DEFW	CHKHD1,ALLHD1
     124/FAAC : 00 00 00 00             HDB2:	DEFW	0000H,0000H
     125/FAB0 : 00 00 00 00             	DEFW	0000H,0000H
     126/FAB4 : FA FB BC FA             	DEFW	DIRBF,HDBLK
     127/FAB8 : 34 FF F5 FD             	DEFW	CHKHD2,ALLHD2
     128/FABC :                         ;
     129/FABC :                         ;       disk parameter block for harddisk
     130/FABC :                         ;
     131/FABC : 80 00                   HDBLK:  DEFW    128		;sectors per track
     132/FABE : 04                      	DEFB    4		;block shift factor
     133/FABF : 0F                      	DEFB    15		;block mask
     134/FAC0 : 00                      	DEFB    0		;extent mask
     135/FAC1 : F7 07                   	DEFW    2039		;disk size-1
     136/FAC3 : FF 03                   	DEFW    1023		;directory max
     137/FAC5 : FF                      	DEFB    255		;alloc 0
     138/FAC6 : FF                      	DEFB    255		;alloc 1
     139/FAC7 : 00 00                   	DEFW    0		;check size
     140/FAC9 : 00 00                   	DEFW    0		;track offset
     141/FACB :                         ;
     142/FACB :                         ;	messages
     143/FACB :                         ;
     144/FACB : 36 34 4B 20 43 50 2F 4D SIGNON: DB	'64K CP/M Vers. 2.2 (Z80 CBIOS V1.2 for Z80SIM, '
         FAD3 : 20 56 65 72 73 2E 20 32
         FADB : 2E 32 20 28 5A 38 30 20
         FAE3 : 43 42 49 4F 53 20 56 31
         FAEB : 2E 32 20 66 6F 72 20 5A
         FAF3 : 38 30 53 49 4D 2C 20   
     145/FAFA : 43 6F 70 79 72 69 67 68 	DB	'Copyright 1988-2007 by Udo Munk)'
         FB02 : 74 20 31 39 38 38 2D 32
         FB0A : 30 30 37 20 62 79 20 55
         FB12 : 64 6F 20 4D 75 6E 6B 29
     146/FB1A : 0D 0A 00                	DB	13,10,0
     147/FB1D :                         ;
     148/FB1D :                         
 AS V1.42 Beta [Bld 271] - Source File bios_8080.asm - Page 4 - 7/27/2024 16:26:39


     149/FB30 :                         	ORG	BIOS+130h
     150/FB30 :                         
     151/FB30 : 7E                      PRTMSG:	LD	A,(HL)
     152/FB31 : B7                      	OR	A
     153/FB32 : C8                      	RET	Z
     154/FB33 : 4F                      	LD	C,A
     155/FB34 : CD 8A FB                	CALL	CONOUT
     156/FB37 : 23                      	INC	HL
     157/FB38 : C3 30 FB                	JP	PRTMSG
     158/FB3B :                         ;
     159/FB3B :                         ;	individual subroutines to perform each function
     160/FB3B :                         ;	simplest case is to just perform parameter initialization
     161/FB3B :                         ;
     162/FB3B : 31 80 00                BOOT:   LD	SP,80H		;use space below buffer for stack
     163/FB3E : 21 CB FA                	LD	HL,SIGNON	;print message
     164/FB41 : CD 30 FB                	CALL	PRTMSG
     165/FB44 : AF                      	XOR	A		;zero in the accum
     166/FB45 : 32 03 00                	LD	(IOBYTE),A	;clear the iobyte
     167/FB48 : 32 04 00                	LD	(CDISK),A	;select disk zero
     168/FB4B : C3 53 FB                	JP	GOCPM		;initialize and go to cp/m
     169/FB4E :                         ;
     170/FB4E :                         ;	simplest case is to read the disk until all sectors loaded
     171/FB4E :                         ;
     172/FB4E : 31 80 00                WBOOT:  LD	SP,80H		;use space below buffer for stack
     173/FB51 : DB 46                   	IN	A,(GET_BDOSCCP)
     174/FB53 :                         GOCPM:
     175/FB53 : 3E C3                   	LD	A,0C3H		;c3 is a jmp instruction
     176/FB55 : 32 00 00                	LD	(0),A		;for jmp to wboot
     177/FB58 : 21 03 FA                	LD	HL,WBOOTE	;wboot entry point
     178/FB5B : 22 01 00                	LD	(1),HL		;set address field for jmp at 0
     179/FB5E :                         ;
     180/FB5E : 32 05 00                	LD	(5),A		;for jmp to bdos
     181/FB61 : 21 06 EC                	LD	HL,BDOS		;bdos entry point
     182/FB64 : 22 06 00                	LD	(6),HL		;address field of jump at 5 to bdos
     183/FB67 :                         ;
     184/FB67 : 01 80 00                	LD	BC,80H		;default dma address is 80h
     185/FB6A : CD E6 FB                	CALL	SETDMA
     186/FB6D :                         ;
     187/FB6D : 3A 04 00                	LD	A,(CDISK)	;get current disk number
     188/FB70 : 4F                      	LD	C,A		;send to the ccp
     189/FB71 : C3 00 E4                	JP	CCP		;go to cp/m for further processing
     190/FB74 :                         
     191/FB74 : DB 01                   CONST:	IN	A,(UART_C8251)	;console status(ready:FF busy:00)
     192/FB76 : E6 02                   	AND	2
     193/FB78 : CA 7E FB                	JP	Z,CONSTB
     194/FB7B : 3E FF                   	LD	A,0FFh
     195/FB7D : C9                      	RET
     196/FB7E : AF                      CONSTB:	XOR	A
     197/FB7F : C9                      	RET
     198/FB80 :                         
     199/FB80 : DB 01                   CONIN:	IN	A,(UART_C8251)	;get character from console
     200/FB82 : E6 02                   	AND	2
     201/FB84 : CA 80 FB                	JP	Z,CONIN
     202/FB87 : DB 00                   	IN	A,(UART_D8251)
     203/FB89 : C9                      	RET
     204/FB8A :                         
     205/FB8A :                         CONOUT:
     206/FB8A : DB 01                   	IN	A,(UART_C8251)
     207/FB8C : E6 01                   	AND	1
     208/FB8E : CA 8A FB                	JP	Z,CONOUT
 AS V1.42 Beta [Bld 271] - Source File bios_8080.asm - Page 5 - 7/27/2024 16:26:39


     209/FB91 : 79                      	LD	A,C
     210/FB92 : D3 00                   	OUT	(UART_D8251),A
     211/FB94 : C9                      	RET
     212/FB95 :                         
     213/FB95 : 3E FF                   LISTST: LD	A,0ffh	;list status (ready:FF not ready:00) always ready (dummy)
     214/FB97 :                         READER: 		;reader (do nothing)
     215/FB97 :                         LIST:			;list (do nothing)
     216/FB97 :                         PUNCH:			;punch (do nothing)
     217/FB97 : C9                      	RET
     218/FB98 :                         ;
     219/FB98 :                         ;	i/o drivers for the disk follow
     220/FB98 :                         ;
     221/FB98 :                         ;	move to the track 00 position of current drive
     222/FB98 :                         ;	translate this call into a settrk call with parameter 00
     223/FB98 :                         ;
     224/FB98 : AF                      HOME:	XOR	A		;select track 0
     225/FB99 : 32 21 FB                	LD	(TRK_NO),A
     226/FB9C : C9                      	RET			;we will move to 00 on first read/write
     227/FB9D :                         ;
     228/FB9D :                         ;	select disk given by register C
     229/FB9D :                         ;
     230/FB9D : 21 00 00                SELDSK: LD	HL,0000H	;error return code
     231/FBA0 : 79                      	LD	A,C
     232/FBA1 : FE 04                   	CP	4		;FD drive 0-3?
     233/FBA3 : DA B1 FB                	JP	C,SELFD		;go
     234/FBA6 : FE 08                   	CP	8		;harddisk 1?
     235/FBA8 : CA BE FB                	JP	Z,SELHD1	;go
     236/FBAB : FE 09                   	CP	9		;harddisk 2?
     237/FBAD : CA C4 FB                	JP	Z,SELHD2	;go
     238/FBB0 : C9                      	RET			;no, error
     239/FBB1 :                         ;	disk number is in the proper range
     240/FBB1 :                         ;	compute proper disk parameter header address
     241/FBB1 :                         SELFD:
     242/FBB1 : 32 20 FB                	LD	(DRV_NO),A	;selekt disk drive
     243/FBB4 : 6F                      	LD	L,A		;L=disk number 0,1,2,3
     244/FBB5 : 29                      	ADD	HL,HL		;*2
     245/FBB6 : 29                      	ADD	HL,HL		;*4
     246/FBB7 : 29                      	ADD	HL,HL		;*8
     247/FBB8 : 29                      	ADD	HL,HL		;*16 (size of each header)
     248/FBB9 : 11 33 FA                	LD	DE,DPBASE
     249/FBBC : 19                      	ADD	HL,DE		;HL=.dpbase(diskno*16)
     250/FBBD : C9                      	RET
     251/FBBE : 21 9C FA                SELHD1:	LD	HL,HDB1		;dph harddisk 1
     252/FBC1 : C3 C7 FB                	JP	SELHD
     253/FBC4 : 21 AC FA                SELHD2:	LD	HL,HDB2		;dph harddisk 2
     254/FBC7 :                         SELHD:
     255/FBC7 : 32 20 FB                	LD	(DRV_NO),A	;select harddisk drive
     256/FBCA : C9                      	RET
     257/FBCB :                         ;
     258/FBCB :                         ;	set track given by register c
     259/FBCB :                         ;
     260/FBCB : 79                      SETTRK: LD	A,C
     261/FBCC : 32 21 FB                	LD	(TRK_NO),A
     262/FBCF : C9                      	RET
     263/FBD0 :                         ;
     264/FBD0 :                         ;	set sector given by register c
     265/FBD0 :                         ;
     266/FBD0 : 79                      SETSEC: LD	A,C
     267/FBD1 : 32 22 FB                	LD	(SEC_NO),A
     268/FBD4 : C9                      	RET
 AS V1.42 Beta [Bld 271] - Source File bios_8080.asm - Page 6 - 7/27/2024 16:26:39


     269/FBD5 :                         ;
     270/FBD5 :                         ;	translate the sector given by BC using the
     271/FBD5 :                         ;	translate table given by DE
     272/FBD5 :                         ;
     273/FBD5 :                         SECTRAN:
     274/FBD5 : 7A                      	LD	A,D		;do we have a translation table?
     275/FBD6 : B3                      	OR	E
     276/FBD7 : C2 E0 FB                	JP	NZ,SECT1	;yes, translate
     277/FBDA : 69                      	LD	L,C		;no, return untranslated
     278/FBDB : 60                      	LD	H,B		;in HL
     279/FBDC : 2C                      	INC	L		;sector no. start with 1
     280/FBDD : C0                      	RET	NZ
     281/FBDE : 24                      	INC	H
     282/FBDF : C9                      	RET
     283/FBE0 : EB                      SECT1:	EX	DE,HL		;HL=.trans
     284/FBE1 : 09                      	ADD	HL,BC		;HL=.trans(sector)
     285/FBE2 : 6E                      	LD	L,(HL)		;L = trans(sector)
     286/FBE3 : 26 00                   	LD	H,0		;HL= trans(sector)
     287/FBE5 : C9                      	RET			;with value in HL
     288/FBE6 :                         ;
     289/FBE6 :                         ;	set dma address given by registers b and c
     290/FBE6 :                         ;
     291/FBE6 : 79                      SETDMA: LD	A,C		;low order address
     292/FBE7 : 32 23 FB                	LD	(DMA_L),A
     293/FBEA : 78                      	LD	A,B		;high order address
     294/FBEB : 32 24 FB                	LD	(DMA_H),A
     295/FBEE : C9                      	RET
     296/FBEF :                         ;
     297/FBEF :                         ;	perform read operation
     298/FBEF :                         ;
     299/FBEF :                         READ:
     300/FBEF : DB 52                   	IN	A,(DISK_READ)
     301/FBF1 : DB 4E                   	IN	A,(FDCST)	;status of i/o operation -> A
     302/FBF3 : B7                      	OR	A
     303/FBF4 : C9                      	RET
     304/FBF5 :                         ;
     305/FBF5 :                         ;	perform a write operation
     306/FBF5 :                         ;
     307/FBF5 :                         WRITE:
     308/FBF5 : DB 53                   	IN	A,(DISK_WRITE)
     309/FBF7 : DB 4E                   	IN	A,(FDCST)	;status of i/o operation -> A
     310/FBF9 : C9                      	RET
     311/FBFA :                         
     312/FBFA :                         ;	the remainder of the CBIOS is reserved uninitialized
     313/FBFA :                         ;	data area, and does not need to be a part of the
     314/FBFA :                         ;	system memory image (the space must be available,
     315/FBFA :                         ;	however, between "begdat" and "enddat").
     316/FBFA :                         ;
     317/FBFA :                         ;	scratch ram area for BDOS use
     318/FBFA :                         ;
     319/FBFA : =0FBFAH                 BEGDAT	EQU	$		;beginning of data area
     320/FBFA : 00 00 00 00 00 00 00 00 DIRBF:	DB	128	dup(0)	;scratch directory area
         FC02 : 00 00 00 00 00 00 00 00
         FC0A : 00 00 00 00 00 00 00 00
         FC12 : 00 00 00 00 00 00 00 00
         FC1A : 00 00 00 00 00 00 00 00
         FC22 : 00 00 00 00 00 00 00 00
         FC2A : 00 00 00 00 00 00 00 00
         FC32 : 00 00 00 00 00 00 00 00
         FC3A : 00 00 00 00 00 00 00 00
 AS V1.42 Beta [Bld 271] - Source File bios_8080.asm - Page 7 - 7/27/2024 16:26:39


         FC42 : 00 00 00 00 00 00 00 00
         FC4A : 00 00 00 00 00 00 00 00
         FC52 : 00 00 00 00 00 00 00 00
         FC5A : 00 00 00 00 00 00 00 00
         FC62 : 00 00 00 00 00 00 00 00
         FC6A : 00 00 00 00 00 00 00 00
         FC72 : 00 00 00 00 00 00 00 00
     321/FC7A : 00 00 00 00 00 00 00 00 ALL00:	DB	31	dup(0)	;allocation vector 0
         FC82 : 00 00 00 00 00 00 00 00
         FC8A : 00 00 00 00 00 00 00 00
         FC92 : 00 00 00 00 00 00 00   
     322/FC99 : 00 00 00 00 00 00 00 00 ALL01:	DB	31	dup(0)	;allocation vector 1
         FCA1 : 00 00 00 00 00 00 00 00
         FCA9 : 00 00 00 00 00 00 00 00
         FCB1 : 00 00 00 00 00 00 00   
     323/FCB8 : 00 00 00 00 00 00 00 00 ALL02:	DB	31	dup(0)	;allocation vector 2
         FCC0 : 00 00 00 00 00 00 00 00
         FCC8 : 00 00 00 00 00 00 00 00
         FCD0 : 00 00 00 00 00 00 00   
     324/FCD7 : 00 00 00 00 00 00 00 00 ALL03:	DB	31	dup(0)	;allocation vector 3
         FCDF : 00 00 00 00 00 00 00 00
         FCE7 : 00 00 00 00 00 00 00 00
         FCEF : 00 00 00 00 00 00 00   
     325/FCF6 : 00 00 00 00 00 00 00 00 ALLHD1:	DB	255	dup(0)	;allocation vector harddisk 1
         FCFE : 00 00 00 00 00 00 00 00
         FD06 : 00 00 00 00 00 00 00 00
         FD0E : 00 00 00 00 00 00 00 00
         FD16 : 00 00 00 00 00 00 00 00
         FD1E : 00 00 00 00 00 00 00 00
         FD26 : 00 00 00 00 00 00 00 00
         FD2E : 00 00 00 00 00 00 00 00
         FD36 : 00 00 00 00 00 00 00 00
         FD3E : 00 00 00 00 00 00 00 00
         FD46 : 00 00 00 00 00 00 00 00
         FD4E : 00 00 00 00 00 00 00 00
         FD56 : 00 00 00 00 00 00 00 00
         FD5E : 00 00 00 00 00 00 00 00
         FD66 : 00 00 00 00 00 00 00 00
         FD6E : 00 00 00 00 00 00 00 00
         FD76 : 00 00 00 00 00 00 00 00
         FD7E : 00 00 00 00 00 00 00 00
         FD86 : 00 00 00 00 00 00 00 00
         FD8E : 00 00 00 00 00 00 00 00
         FD96 : 00 00 00 00 00 00 00 00
         FD9E : 00 00 00 00 00 00 00 00
         FDA6 : 00 00 00 00 00 00 00 00
         FDAE : 00 00 00 00 00 00 00 00
         FDB6 : 00 00 00 00 00 00 00 00
         FDBE : 00 00 00 00 00 00 00 00
         FDC6 : 00 00 00 00 00 00 00 00
         FDCE : 00 00 00 00 00 00 00 00
         FDD6 : 00 00 00 00 00 00 00 00
         FDDE : 00 00 00 00 00 00 00 00
         FDE6 : 00 00 00 00 00 00 00 00
         FDEE : 00 00 00 00 00 00 00   
     326/FDF5 : 00 00 00 00 00 00 00 00 ALLHD2:	DB	255	dup(0)	;allocation vector harddisk 2
         FDFD : 00 00 00 00 00 00 00 00
         FE05 : 00 00 00 00 00 00 00 00
         FE0D : 00 00 00 00 00 00 00 00
         FE15 : 00 00 00 00 00 00 00 00
 AS V1.42 Beta [Bld 271] - Source File bios_8080.asm - Page 8 - 7/27/2024 16:26:39


         FE1D : 00 00 00 00 00 00 00 00
         FE25 : 00 00 00 00 00 00 00 00
         FE2D : 00 00 00 00 00 00 00 00
         FE35 : 00 00 00 00 00 00 00 00
         FE3D : 00 00 00 00 00 00 00 00
         FE45 : 00 00 00 00 00 00 00 00
         FE4D : 00 00 00 00 00 00 00 00
         FE55 : 00 00 00 00 00 00 00 00
         FE5D : 00 00 00 00 00 00 00 00
         FE65 : 00 00 00 00 00 00 00 00
         FE6D : 00 00 00 00 00 00 00 00
         FE75 : 00 00 00 00 00 00 00 00
         FE7D : 00 00 00 00 00 00 00 00
         FE85 : 00 00 00 00 00 00 00 00
         FE8D : 00 00 00 00 00 00 00 00
         FE95 : 00 00 00 00 00 00 00 00
         FE9D : 00 00 00 00 00 00 00 00
         FEA5 : 00 00 00 00 00 00 00 00
         FEAD : 00 00 00 00 00 00 00 00
         FEB5 : 00 00 00 00 00 00 00 00
         FEBD : 00 00 00 00 00 00 00 00
         FEC5 : 00 00 00 00 00 00 00 00
         FECD : 00 00 00 00 00 00 00 00
         FED5 : 00 00 00 00 00 00 00 00
         FEDD : 00 00 00 00 00 00 00 00
         FEE5 : 00 00 00 00 00 00 00 00
         FEED : 00 00 00 00 00 00 00   
     327/FEF4 : 00 00 00 00 00 00 00 00 CHK00:	DB	16	dup(0)	;check vector 0
         FEFC : 00 00 00 00 00 00 00 00
     328/FF04 : 00 00 00 00 00 00 00 00 CHK01:	DB	16	dup(0)	;check vector 1
         FF0C : 00 00 00 00 00 00 00 00
     329/FF14 : 00 00 00 00 00 00 00 00 CHK02:	DB	16	dup(0)	;check vector 2
         FF1C : 00 00 00 00 00 00 00 00
     330/FF24 : 00 00 00 00 00 00 00 00 CHK03:	DB	16	dup(0)	;check vector 3
         FF2C : 00 00 00 00 00 00 00 00
     331/FF34 :                         CHKHD1:	DB	0	dup(0)	;check vector harddisk 1
     332/FF34 :                         CHKHD2:	DB	0	dup(0)	;check vector harddisk 2
     333/FF34 :                         ;
     334/FF34 : =0FF34H                 ENDDAT	EQU	$		;end of data area
     335/FF34 : =33AH                   DATSIZ	EQU	$-BEGDAT	;size of data area
     336/FF34 :                         ;
     337/FF34 :                         	END			;of BIOS
 AS V1.42 Beta [Bld 271] - Source File bios_8080.asm - Page 9 - 7/27/2024 16:26:39


  Symbol Table (* = unused):
  --------------------------

 ALL00 :                      0FC7A C |  ALL01 :                      0FC99 C |
 ALL02 :                      0FCB8 C |  ALL03 :                      0FCD7 C |
 ALLHD1 :                     0FCF6 C |  ALLHD2 :                     0FDF5 C |
*ARCHITECTURE :                                        "i386-unknown-win32" - |
 BDOS :                       0EC06 - |  BEGDAT :                     0FBFA - |
 BIAS :                       0B000 - |  BIOS :                       0FA00 - |
 BOOT :                       0FB3B C | *CASESENSITIVE :                  0 - |
 CCP :                        0E400 - |  CDISK :                          4 - |
 CHK00 :                      0FEF4 C |  CHK01 :                      0FF04 C |
 CHK02 :                      0FF14 C |  CHK03 :                      0FF24 C |
 CHKHD1 :                     0FF34 C |  CHKHD2 :                     0FF34 C |
 CONIN :                      0FB80 C |  CONOUT :                     0FB8A C |
 CONST :                      0FB74 C |  CONSTB :                     0FB7E C |
*CONSTPI :        3.141592653589793 - | *DATE :                 "7/27/2024" - |
*DATSIZ :                       33A - |  DIRBF :                      0FBFA C |
 DISK_READ :                     52 - |  DISK_WRITE :                    53 - |
 DMA_H :                      0FB24 - |  DMA_L :                      0FB23 - |
 DPBASE :                     0FA33 C |  DPBLK :                      0FA8D C |
 DRV_NO :                     0FB20 - | *D_ERROR :                        1 - |
*D_SUCCESS :                      0 - | *ENDDAT :                     0FF34 - |
*FALSE :                          0 - |  FDCST :                         4E - |
 GET_BDOSCCP :                   46 - | *GET_BIOS :                      47 - |
 GOCPM :                      0FB53 C | *HAS64 :                          0 - |
 HDB1 :                       0FA9C C |  HDB2 :                       0FAAC C |
 HDBLK :                      0FABC C |  HOME :                       0FB98 C |
*IOBASE_180 :                   0C0 - |  IOBYTE :                         3 - |
 LIST :                       0FB97 C | *LISTON :                         1 - |
 LISTST :                     0FB95 C | *MACEXP :                         7 - |
*MOMCPU :                        80 - | *MOMCPUNAME :                 "Z80" - |
 MSIZE :                         40 - | *NESTMAX :                      100 - |
*NSECTS :                        2C - |  PIC_IOBASE :                    40 - |
 PRTMSG :                     0FB30 C |  PUNCH :                      0FB97 C |
 READ :                       0FBEF C |  READER :                     0FB97 C |
*RELAXED :                        0 - |  SECT1 :                      0FBE0 C |
 SECTRAN :                    0FBD5 C |  SEC_NO :                     0FB22 - |
 SELDSK :                     0FB9D C |  SELFD :                      0FBB1 C |
 SELHD :                      0FBC7 C |  SELHD1 :                     0FBBE C |
 SELHD2 :                     0FBC4 C |  SETDMA :                     0FBE6 C |
 SETSEC :                     0FBD0 C |  SETTRK :                     0FBCB C |
 SIGNON :                     0FACB C | *TIME :                  "16:26:39" - |
 TRANS :                      0FA73 C |  TRK_NO :                     0FB21 - |
*TRUE :                           1 - |  UART_C8251 :                     1 - |
 UART_D8251 :                     0 - | *VERSION :                     142F - |
*WARNRELATIVE :                   0 - |  WBOOT :                      0FB4E C |
 WBOOTE :                     0FA03 C |  WRITE :                      0FBF5 C |

     89 symbols
     23 unused symbols

 AS V1.42 Beta [Bld 271] - Source File bios_8080.asm - Page 10 - 7/27/2024 16:26:39


  Code Pages:
  ----------

STANDARD (0 changed characters)

1 code page

0.05 seconds assembly time

    362 lines source file
      2 passes
      0 errors
      0 warnings
